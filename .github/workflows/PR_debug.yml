name: PR dev

on:
  pull_request:
    # Sequence of patterns matched against refs/heads
    branches:
      - cicd

jobs:
  build_tests:
    name: Workflow
    strategy:
      fail-fast: false
      matrix:
        arch: ["amd64", "arm64"]
    uses: ./.github/workflows/sub_building.yml
    with:
      IMAGE_VERSION: ${{ inputs.IMAGE_VERSION }}
#      DOCKER_BUILD_REPO: ${{ inputs.DOCKER_BUILD_REPO }}
      DOCKER_BUILD_REPO: "nwodtuhs/exegol-builds"
#      IMAGE_BASE_NAME: ${{ inputs.IMAGE_BASE_NAME }}
      IMAGE_BASE_NAME: "pr-cicd"
#      DOCKERFILE: ${{ inputs.DOCKERFILE }}
      DOCKERFILE: "debug.dockerfile"
      ARCH: ${{ matrix.arch }}
      PR_MODE: true
